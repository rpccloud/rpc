package pkgName

import "github.com/rpccloud/rpc"

type rpcCache struct{}

// NewRPCCache ...
func NewRPCCache() rpc.ReplyCache {
	return &rpcCache{}
}

// Get ...
func (p *rpcCache) Get(fnString string) rpc.ReplyCacheFunc {
	switch fnString {
	case "":
		return fnCache0
	default:
		return nil
	}
}

func fnCache0(rt rpc.Runtime, stream *rpc.Stream, fn interface{}) bool {
	if !stream.IsReadFinish() {
		return false
	} else {
		stream.SetWritePosToBodyStart()
		fn.(func(rpc.Runtime) rpc.Return)(rt)
		return true
	}
}

